!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","../parser/htmlScanner","vscode-languageserver-types","../utils/strings","vscode-uri","../htmlLanguageTypes"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("../parser/htmlScanner"),n=e("vscode-languageserver-types"),s=e("../utils/strings"),a=e("vscode-uri"),i=e("../htmlLanguageTypes");function o(e,t){var r=e[0];return r!==e[e.length-1]||"'"!==r&&'"'!==r||(e=e.substr(1,e.length-2)),e}function u(e,t,r,i,u,c){var g=o(r,e.languageId);if(f=g,p=e.languageId,f.length&&("handlebars"!==p||!/{{.*}}/.test(f))&&/\b(w[\w\d+.-]*:\/\/)?[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|\/?))/.test(f)){var f,p;g.length<r.length&&(i++,u--);var l=function(e,t,r,n){if(!(/^\s*javascript\:/i.test(t)||/^\s*\#/i.test(t)||/[\n\r]/.test(t)))return t=t.replace(/^\s*/g,""),/^https?:\/\//i.test(t)||/^file:\/\//i.test(t)?t:/^\/\//i.test(t)?(s.startsWith(e,"https://")?"https":"http")+":"+t.replace(/^\s*/g,""):r?r.resolveReference(t,n||e):t}(e.uri,g,t,c);if(l&&function(e){try{return a.URI.parse(e),!0}catch(e){return!1}}(l))return{range:n.Range.create(e.positionAt(i),e.positionAt(u)),target:l}}}t.findDocumentLinks=function(e,t){for(var n=[],s=r.createScanner(e.getText(),0),a=s.scan(),c=!1,g=!1,f=void 0;a!==i.TokenType.EOS;){switch(a){case i.TokenType.StartTag:if(!f)g="base"===s.getTokenText().toLowerCase();break;case i.TokenType.AttributeName:var p=s.getTokenText().toLowerCase();c="src"===p||"href"===p;break;case i.TokenType.AttributeValue:if(c){var l=s.getTokenText();if(!g){var d=u(e,t,l,s.getTokenOffset(),s.getTokenEnd(),f);d&&n.push(d)}g&&void 0===f&&(f=o(l,e.languageId))&&t&&(f=t.resolveReference(f,e.uri)),g=!1,c=!1}}a=s.scan()}return n}}));